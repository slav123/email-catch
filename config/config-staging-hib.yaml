server:
  ports: [25, 587, 465, 2525]
  hostname: "capture.hib.pl"
  tls:
    enabled: true
    # These files will be auto-generated by Let's Encrypt
    cert_file: "certs/letsencrypt/capture.hib.pl.crt"
    key_file: "certs/letsencrypt/capture.hib.pl.key"
    letsencrypt:
      enabled: true
      domains: ["capture.hib.pl"]
      email: "admin@hib.pl"  # Update this to your actual email
      cache_dir: "certs/letsencrypt"
      staging: true   # STAGING MODE - for testing Let's Encrypt
      http_port: 80   # Port for HTTP-01 challenge
      renew_before_days: 30
  rate_limit:
    enabled: false  # Disabled for testing
    max_emails_per_minute: 1000
    max_email_size_mb: 50

storage:
  s3_compatible:
    enabled: true
    # Cloudflare R2 endpoint
    endpoint: "https://98bc492cc3a27daf762bb12c3bd97ca9.r2.cloudflarestorage.com"
    access_key: "98bc492cc3a27daf762bb12c3bd97ca9"
    secret_key: "3af89786ae194079aa34460f18b2144f25b0ff239c2ff978e0247511a284e423"
    bucket: "email"
    region: "auto"  # Cloudflare R2 uses "auto" region
    use_ssl: true
    path_prefix: "test-emails"  # Separate prefix for testing
  local:
    enabled: true
    directory: "/opt/email-catch/test-emails"

routes:
  # Test route for staging
  - name: "staging_test"
    condition:
      recipient_pattern: ".*@capture\\.hib\\.pl"
    actions:
      - type: "store_s3"
        enabled: true
        config:
          folder: "staging"
      - type: "store_local"
        enabled: true
        config:
          folder: "staging-local"
    enabled: true

logging:
  level: "debug"
  format: "text"
  file: "/opt/email-catch/logs/email-catch-staging.log"